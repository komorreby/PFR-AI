# PFR-AI: Интеллектуальная система анализа пенсионных документов

Прототип веб-приложения для ввода данных пенсионных дел, их анализа на предмет ошибок, **анализа соответствия законодательству с помощью RAG** и отображения истории обработанных дел.

## Оглавление

- [Основные возможности](#основные-возможности)
- [Технологический стек](#технологический-стек)
- [Архитектура](#архитектура)
- [Быстрый старт](#быстрый-старт)
- [Структура проекта](#структура-проекта)
- [Документация](#документация)
- [Дальнейшие шаги](#дальнейшие-шаги)

## Основные возможности

*   **Ввод и обработка дел:** Многошаговая форма для ввода данных и их асинхронная обработка.
*   **RAG-анализ:** Анализ соответствия законодательству (ФЗ-400, ФЗ-166) с использованием Retrieval-Augmented Generation, графа знаний и локальных LLM.
*   **Распознавание документов:** Извлечение данных из сканов и фотографий документов (паспорт, СНИЛС и др.) с помощью мультимодальных моделей.
*   **Валидация и проверка:** Автоматизированная проверка дел на ошибки и несоответствия.
*   **Управление пользователями и делами:** Система с ролями (администратор, менеджер) для управления доступом и историей дел.
*   **Экспорт результатов:** Возможность выгрузки отчетов в форматах PDF и DOCX.

## Технологический стек

*   **Frontend:** React, TypeScript, Vite, Ant Design
*   **Backend:** Python, FastAPI, SQLAlchemy
*   **RAG и AI:** LlamaIndex, Transformers, PyTorch, Ollama
*   **Базы данных:** Neo4j (графовая), SQLite (реляционная)

Подробный перечень всех используемых библиотек, фреймворков и инструментов доступен в файле [TECHNOLOGIES.md](./TECHNOLOGIES.md).

## Архитектура

Система построена на микросервисной архитектуре с разделением на Frontend и Backend.

- **Бэкенд** на FastAPI обрабатывает всю бизнес-логику, включая асинхронные задачи для анализа RAG и распознавания документов.
- **RAG-система** использует гибридный поиск (векторный, BM25, графовый) для нахождения релевантной информации в нормативных документах.
- **Граф знаний** в Neo4j моделирует связи между законами, статьями и типами пенсий, обогащая контекст для RAG.
- **Frontend** на React предоставляет пользовательский интерфейс для взаимодействия с системой.

Подробнее об архитектуре можно прочитать в README бэкенда: [`backend/README.md`](./backend/README.md).

## Быстрый старт

### Требования

*   Python 3.10+
*   Node.js 20+
*   Docker (для Neo4j и других сервисов)
*   **Ollama** с загруженными моделями (см. `backend/README.md`).

### 1. Настройка окружения

Скопируйте `.env.example` (если он есть) в `.env` в директории `backend` и заполните переменные для подключения к Neo4j, секретный ключ и другие параметры.

### 2. Запуск Backend

```bash
cd backend
python -m venv venv
# Windows: .\\venv\\Scripts\\activate | macOS/Linux: source ./venv/bin/activate
pip install -r requirements.txt
python create_initial_users.py # Создание тестовых пользователей
uvicorn app.main:app --reload
```

### 3. Запуск Frontend

```bash
cd frontend
npm install
npm run dev
```

Более подробные инструкции по запуску, включая настройку Neo4j и Ollama, находятся в README соответствующих модулей:
- [Backend/README.md](./backend/README.md)
- [Frontend/README.md](./frontend/README.md)

## Структура проекта

```
PFR-AI/
├── backend/            # Бэкенд на FastAPI
│   ├── app/            # Основной код приложения
│   ├── config_data/    # Конфигурационные файлы
│   └── README.md
├── frontend/           # Фронтенд на React
│   ├── src/
│   └── README.md
├── docs/               # Дополнительная документация
└── README.md           # Этот файл
```

## Документация

- **API Документация:** После запуска бэкенда интерактивная документация Swagger UI доступна по адресу `http://localhost:8000/docs`.
- **Статическое описание API:** [backend/api.md](./backend/api.md)
- **Онтология графа знаний:** [docs/graph_ontology.md](./docs/graph_ontology.md)

## Дальнейшие шаги

*   Полный переход на асинхронные операции для всех I/O bound задач.
*   Расширение покрытия тестами.
*   Интеграция с системами мониторинга и логирования (например, Prometheus, Grafana, ELK).
*   Улучшение UI/UX, добавление дашбордов.
*   Использование более надежной системы управления фоновыми задачами (например, Celery).