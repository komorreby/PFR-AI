# PFR-AI: Фронтенд

Клиентская часть приложения для анализа пенсионных дел, разработанная с использованием React, TypeScript и Chakra UI.

## Функциональность

*   Отображает многошаговую форму для ввода данных пенсионного дела.
*   Использует `react-hook-form` для управления состоянием формы и валидации.
*   Использует `react-datepicker` и `react-imask` (через `CustomDateInput`) для удобного ввода дат и СНИЛС с масками.
*   Отправляет данные формы на бэкенд (`/process`) для базового анализа и сохранения.
*   **Предоставляет кнопку "RAG Анализ", которая отправляет собранные данные формы на эндпоинт `/api/v1/analyze_case` для анализа соответствия законодательству.**
*   **Отображает текстовый результат RAG-анализа в отдельном блоке под формой.**
*   Отображает результаты базового анализа (список ошибок) с помощью компонента `ErrorDisplay` и уведомлений `useToast`.
*   Реализует отдельную страницу для просмотра истории обработанных дел (`/history`).
*   Загружает и отображает историю дел с помощью компонента `HistoryList`.
*   Позволяет скачивать документы (PDF/DOCX) для записей истории, обращаясь к эндпоинту `/download_document`.
*   Использует `react-router-dom` для навигации между страницами.
*   Использует кастомную тему `Chakra UI` (`theme.ts`).

## Основные компоненты

*   **`App.tsx`**: Корневой компонент, настраивает маршрутизацию (`Routes`, `Route`), отображает навигацию.
*   **`pages/HistoryPage.tsx`**: Страница отображения истории. Загружает данные с `/history`, отображает `HistoryList`.
*   **`components/CaseForm.tsx`**: Компонент-контейнер для многошаговой формы. Управляет активным шагом (`useSteps`), содержит общую логику валидации шагов (`handleNext`), отправки формы для базового анализа (`onSubmit`), **отправки данных для RAG-анализа (`handleRagAnalysis`)**, и навигацию между шагами. Рендерит компоненты конкретных шагов, кнопку "RAG Анализ" и блок для отображения результата RAG.
*   **`components/formSteps/*`**: Компоненты для шагов формы (Личные данные, Трудовой стаж, Доп. информация).
*   **`components/formInputs/*`**: Переиспользуемые компоненты для полей формы.
*   **`components/HistoryList.tsx`**: Компонент для отображения списка истории дел.
*   **`components/ErrorDisplay.tsx`**: Компонент для отображения списка ошибок базового анализа.
*   **`theme.ts`**: Файл определения кастомной темы Chakra UI.
*   **`utils.ts`**: Содержит вспомогательные функции.

## Установка и запуск

1.  **Требования:** Node.js (рекомендуется LTS версия), npm.
2.  Перейдите в директорию `frontend`:
    ```bash
    cd frontend
    ```
3.  **Установка зависимостей:**
    ```bash
    npm install
    ```
    Основные зависимости:
    *   `react`, `react-dom`: Библиотека UI.
    *   `typescript`: Типизация JavaScript.
    *   `@chakra-ui/react`, `@chakra-ui/icons`, `@emotion/react`, `@emotion/styled`, `framer-motion`: Библиотека UI компонентов и анимации.
    *   `react-hook-form`: Управление формами.
    *   `react-router-dom`: Маршрутизация.
    *   `react-datepicker`: Компонент выбора даты.
    *   `react-imask`: Компонент для масок ввода.
    *   `date-fns`: Библиотека для работы с датами.
    *   `react-icons`: Библиотека иконок.
    *   `axios`: Для выполнения HTTP-запросов к бэкенду.
4.  **Запуск сервера для разработки:**
    ```bash
    npm run dev
    ```
    Приложение будет доступно по адресу `http://localhost:5173` (или другому порту, указанному Vite). Сервер поддерживает Hot Module Replacement (HMR).
5.  **Сборка для продакшена:**
    ```bash
    npm run build
    ```
    Готовые к развертыванию файлы будут помещены в директорию `dist`.
6.  **Линтинг:**
    ```bash
    npm run lint
    ```

## Зависимость от Бэкенда

Фронтенд ожидает, что бэкенд запущен и доступен по адресу `http://127.0.0.1:8000` (задается как `baseURL` при создании экземпляра `axios` в `components/CaseForm.tsx`). Все API запросы направляются на этот адрес.
