# Онтология Графа Знаний для Анализа Пенсионных Дел (Пилотная Версия)

Дата создания: 2024-07-27
Версия: 0.1

## 1. Сущности (Узлы)

### 1.1. `Law` (Закон)
Представляет собой федеральный закон или другой нормативный акт.

**Атрибуты:**
*   `law_id`: `String` (Primary Key) - Уникальный идентификатор закона.
    *   Формат: Имя файла PDF без расширения (например, "ФЗ-400-ФЗ-28_12_2013").
*   `title`: `String` - Полное официальное название закона.
    *   Пример: "Федеральный закон 'О страховых пенсиях'".
*   `number`: `String` - Номер закона.
    *   Пример: "400-ФЗ".
*   `adoption_date`: `Date` - Дата принятия закона.
    *   Формат: "YYYY-MM-DD" (например, "2013-12-28").
*   `short_description`: `String` (Optional) - Краткое описание или аннотация закона.
*   `file_path`: `String` (Optional) - Путь к файлу .pdf с текстом закона в системе (например, "backend/data/ФЗ-400-ФЗ-28_12_2013.pdf").

### 1.2. `Article` (Статья Закона)
Представляет собой статью, пункт, часть или другой структурный элемент закона.

**Атрибуты:**
*   `article_id`: `String` (Primary Key) - Уникальный идентификатор статьи.
    *   Формат: `<law_id>_Ст<номер_статьи_нормализованный>`.
    *   `<номер_статьи_нормализованный>`: Нормализованный номер статьи/пункта (например, "8", "8.1", "8_ч2_п1"). Требует функции нормализации.
    *   Пример: "ФЗ-400-ФЗ-28_12_2013_Ст8", "ФЗ-400-ФЗ-28_12_2013_Ст8_ч2_п1".
*   `number_text`: `String` - Исходное текстовое представление номера статьи/пункта, как в документе.
    *   Пример: "Статья 8", "пункт 1 части 2 статьи 8".
*   `title`: `String` (Optional) - Название статьи, если оно есть.
    *   Пример: "Условия назначения страховой пенсии по старости".
*   `source_chunk_id`: `String` (Optional) - Идентификатор соответствующего чанка текста в векторной базе данных (если текст статьи разбит на чанки).

### 1.3. `PensionType` (Тип Пенсии)
Представляет собой вид пенсии, предусмотренный законодательством.

**Атрибуты:**
*   `pension_type_id`: `String` (Primary Key) - Уникальный стандартизированный идентификатор типа пенсии.
    *   Берется из контролируемого словаря (enum/списка), синхронизированного с `PENSION_TYPE_MAP` в `config.py`.
    *   Пример: "retirement_standard", "disability_social", "survivor_insurance".
*   `name`: `String` - Полное наименование типа пенсии.
    *   Пример: "Страховая пенсия по старости".
*   `short_description`: `String` (Optional) - Краткое описание типа пенсии.

### 1.4. `EligibilityCondition` (Условие Назначения Пенсии)
Представляет собой конкретное условие, которое должно быть выполнено для назначения определенного типа пенсии, как указано в статье закона.

**Атрибуты:**
*   `condition_id`: `String` (Primary Key) - Уникальный идентификатор условия.
    *   Формат: `<article_id_где_определено>_cond_<ключевое_слово_или_порядковый_номер>`.
    *   `<ключевое_слово_или_порядковый_номер>`: Стандартное ключевое слово (например, `age`, `stazh_insurance`, `ipk_value`) или порядковый номер.
    *   Пример: "ФЗ-400-ФЗ-28_12_2013_Ст8_cond_age".
*   `description`: `String` - Текстовое описание условия.
    *   Пример: "Достижение возраста 65 лет для мужчин".
*   `value_numeric`: `Float` (Optional) - Числовое значение условия.
    *   Пример: 65, 15, 30.
*   `value_unit`: `String` (Optional) - Единица измерения для `value_numeric`.
    *   Пример: "лет", "баллов", "рублей".
*   `value_text`: `String` (Optional) - Полное текстовое значение условия, если его сложно или нецелесообразно разбивать на `value_numeric` и `value_unit`.
    *   Пример: "не менее 15 лет", "не менее 30 баллов".
*   `gender_specific`: `String` (Optional) - Указание пола, к которому применяется условие.
    *   Пример: "мужчины", "женщины", "все".
*   `applicable_year`: `Integer` (Optional) - Год, с которого или по который действует условие (актуально для переходных положений).

## 2. Отношения (Ребра)

### 2.1. `:CONTAINS_ARTICLE`
*   **Направление:** `(Law) -[:CONTAINS_ARTICLE]-> (Article)`
*   **Смысл:** Закон содержит статью.
*   **Атрибуты на ребре:** Нет для пилотной версии.

### 2.2. `:DEFINES_CONDITION`
*   **Направление:** `(Article) -[:DEFINES_CONDITION]-> (EligibilityCondition)`
*   **Смысл:** Статья определяет (устанавливает) условие назначения пенсии.
*   **Атрибуты на ребре:** Нет для пилотной версии.

### 2.3. `:APPLIES_TO_PENSION_TYPE`
*   **Направление:** `(EligibilityCondition) -[:APPLIES_TO_PENSION_TYPE]-> (PensionType)`
*   **Смысл:** Условие назначения пенсии применяется к определенному типу пенсии.
*   **Атрибуты на ребре:** Нет для пилотной версии.

### 2.4. `:RELATES_TO_PENSION_TYPE`
*   **Направление:** `(Article) -[:RELATES_TO_PENSION_TYPE]-> (PensionType)`
*   **Смысл:** Статья тематически связана с определенным типом пенсии (упоминает, регулирует его аспекты и т.д.).
*   **Атрибуты на ребре:** Нет для пилотной версии.

## 3. Принципы Нормализации Идентификаторов

*   **`law_id`**: Используется имя файла PDF источника (без расширения).
*   **`article_id`**: Конкатенация `law_id` и нормализованного номера статьи (например, "8", "8.1", "8_ч2_п1"). Необходима функция для приведения различных текстовых представлений номеров статей ("Статья 8", "ст. 8", "Ст.8 Гл.2") к единому формату.
*   **`pension_type_id`**: Стандартизированные строковые константы из словаря (`PENSION_TYPE_MAP`).
*   **`condition_id`**: Конкатенация `article_id` (где условие определено) и уникального в рамках статьи идентификатора условия (на основе ключевого слова или порядкового номера).

## 4. Открытые вопросы и дальнейшее развитие (Примеры)
*   Детализация `Article` до `ЧастьСтатьи`, `ПунктСтатьи`, `ПодпунктСтатьи`.
*   Введение сущности `КатегорияГраждан` (например, "северяне", "инвалиды") и связей с `EligibilityCondition` или `PensionType`.
*   Введение сущности `Документ` и связей `PensionType -[:REQUIRES_DOCUMENT]-> Document`.
*   Обработка версионности законов и статей.
*   Добавление атрибутов на ребра (например, источник извлечения, степень уверенности). 