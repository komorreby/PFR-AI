# Описание проекта PFR-AI

## Назначение проекта

Проект PFR-AI (presumably Pension Fund of Russia - Artificial Intelligence) представляет собой систему, вероятно, предназначенную для автоматизации и повышения эффективности процессов, связанных с деятельностью Пенсионного Фонда. Основная цель проекта - использование технологий искусственного интеллекта для обработки данных, анализа информации и предоставления различных сервисов.

Судя по используемым технологиям, проект может включать в себя следующие функциональные возможности:

*   **Обработка и анализ больших объемов данных:** Использование Python с библиотеками для анализа данных (pandas, numpy, scikit-learn) и машинного обучения (llama-index, transformers, torch) указывает на возможность работы с большими датасетами, их анализа, выявления закономерностей и построения прогнозных моделей.
*   **Создание и использование графов знаний:** Присутствие библиотек, связанных с графами (networkx, llama-index graph capabilities) и баз данных ChromaDB, Neo4j (предположительно, судя по `chromadb` и интересу к графам), может свидетельствовать о построении графов знаний для представления и анализа сложных взаимосвязей в данных ПФР.
*   **Обработка естественного языка (NLP):** Библиотеки, такие как `nltk`, `sentence-transformers`, `transformers`, указывают на активное использование NLP для анализа текстовых документов, обращений граждан, нормативных актов и т.д. Это может включать задачи классификации текстов, извлечения информации, машинного перевода и генерации текста.
*   **Работа с различными форматами документов:** Наличие библиотек для работы с PDF (`pypdf`, `pdfminer.six`, `PyMuPDF`, `pdf2image`), DOCX (`python-docx`), XLSX (`openpyxl`, `XlsxWriter`), изображений (`Pillow`, `opencv-python`) говорит о возможности системы обрабатывать разнообразные входящие документы.
*   **Создание API для взаимодействия:** Использование FastAPI предполагает создание бэкенд-сервиса с REST API, через который могут взаимодействовать другие компоненты системы или внешние пользователи.
*   **Построение пользовательского интерфейса:** Фронтенд на React с использованием Chakra UI и Framer Motion указывает на разработку современного и интерактивного веб-интерфейса для пользователей системы.
*   **Интеграция с различными сервисами:** Наличие `google-cloud-vision` и `openai` предполагает интеграцию с облачными сервисами Google для распознавания изображений и моделями OpenAI для решения различных задач ИИ.
*   **Асинхронная обработка:** Использование `aiohttp`, `anyio`, `asyncio` говорит о том, что система спроектирована для обработки большого количества запросов и выполнения длительных операций без блокировки основного потока.

## Используемые технологии

### Бэкенд (Python)

*   **Веб-фреймворк:** FastAPI
*   **Обработка данных и машинное обучение:**
    *   LlamaIndex (и его компоненты `llama-index-core`, `llama-index-embeddings-huggingface`, `llama-index-llms-ollama`, `llama-index-llms-openai`, etc.) - для построения и работы с индексами данных для RAG (Retrieval Augmented Generation) систем.
    *   Transformers (Hugging Face) - для работы с state-of-the-art моделями НЛП.
    *   Sentence Transformers - для генерации эмбеддингов предложений.
    *   Scikit-learn - для классических задач машинного обучения.
    *   Pandas, NumPy - для манипуляции и анализа данных.
    *   Torch (PyTorch) - как бэкенд для моделей глубокого обучения.
    *   Ollama - для локального запуска больших языковых моделей.
*   **Работа с текстом и NLP:**
    *   NLTK - для различных задач обработки естественного языка.
    *   Langdetect - для определения языка текста.
    *   BeautifulSoup4, lxml - для парсинга HTML и XML.
    *   Markdown, markdownify - для работы с Markdown.
*   **Работа с файлами и форматами:**
    *   PyPDF, PDFMiner.six, PyMuPDF, pdf2image - для работы с PDF-файлами.
    *   python-docx - для работы с DOCX-файлами.
    *   Openpyxl, XlsxWriter - для работы с XLSX-файлами.
    *   Pillow, opencv-python - для обработки изображений.
    *   python-magic - для определения типов файлов.
*   **Базы данных и хранилища:**
    *   SQLAlchemy - ORM для работы с реляционными базами данных.
    *   AIOSQLite - асинхронный драйвер для SQLite.
    *   ChromaDB - векторная база данных для хранения эмбеддингов.
    *   Neo4j (возможно, используется клиент `neo4j`) - графовая база данных.
*   **API и сети:**
    *   AIOHTTP, HTTPX - для асинхронных HTTP-запросов.
    *   Requests - для синхронных HTTP-запросов.
    *   Uvicorn - ASGI-сервер для FastAPI.
*   **Аутентификация и авторизация:**
    *   Passlib[bcrypt], python-jose - для хэширования паролей и работы с JWT.
*   **Прочее:**
    *   Google Cloud Vision - для распознавания изображений через API Google.
    *   OpenAI - для взаимодействия с моделями OpenAI.
    *   GigaChat - (вероятно) для интеграции с моделями от Сбера.
    *   Celery (возможно, если есть задачи фоновой обработки, хотя явно не указана)
    *   Множество других вспомогательных библиотек.

### Фронтенд (JavaScript/TypeScript)

*   **UI-библиотека/фреймворк:** React
*   **Компоненты пользовательского интерфейса:** Chakra UI
*   **Анимации:** Framer Motion
*   **Загрузка файлов:** React Dropzone

## Диаграммы C4 (предположения)

Хотя точная архитектура без детального изучения кода неизвестна, можно предположить следующие уровни для модели C4:

### Уровень 1: Контекст системы (System Context)

```
+-----------------+     +---------------------+     +-------------------+
|  Пользователи   | --> |       PFR-AI        | <-- | Внешние системы   |
| (Сотрудники ПФР,|     | (Система обработки  |     | (Гос. органы,    |
|  Граждане)      |     |   данных и ИИ)      |     |  API банков)     |
+-----------------+     +---------------------+     +-------------------+
```

*   **Система:** PFR-AI
*   **Пользователи:**
    *   Сотрудники ПФР: используют систему для выполнения своих рабочих задач, анализа данных, подготовки отчетов.
    *   Граждане (возможно, через портал): получают информацию, подают заявления.
*   **Внешние системы:**
    *   Государственные органы: обмен данными.
    *   API банков: получение/отправка информации о платежах.
    *   Сервисы ИИ (OpenAI, Google Cloud Vision): для расширения функциональности.

### Уровень 2: Контейнеры (Containers)

```
+-----------------------------------------------------------------------------+
|                                  PFR-AI                                     |
|                                                                             |
|  +---------------------+  +---------------------+  +---------------------+  |
|  |  Фронтенд-приложение|  | Бэкенд-приложение   |  |    Базы данных      |  |
|  |  (React, ChakraUI)  |  | (Python, FastAPI)   |  | (PostgreSQL/SQLite, |  |
|  |                     |  |                     |  |  ChromaDB, Neo4j)   |  |
|  +---------------------+  +---------------------+  +---------------------+  |
|           ^                      ^                           ^             |
|           | HTTP/S               | API (REST, gRPC?)         | SQL, Cypher,|  |
|           |                      |                           | HTTP        |  |
|  +---------------------+  +---------------------+  +---------------------+  |
|  | Обработчик файлов   |  |   Модуль аналитики  |  |  Модуль интеграций  |  |
|  | (Python, Tika, etc)|  | (Python, ML/NLP libs)|  | (Python, SDKs)      |  |
|  +---------------------+  +---------------------+  +---------------------+  |
|                                                                             |
+-----------------------------------------------------------------------------+
```

*   **Фронтенд-приложение (Веб-браузер):** Пользовательский интерфейс, построенный на React, Chakra UI. Взаимодействует с бэкендом по HTTP/S.
*   **Бэкенд-приложение (Python/FastAPI):** Основная логика приложения, API для фронтенда и других сервисов, оркестрация работы модулей.
*   **Базы данных:**
    *   Реляционная БД (например, PostgreSQL или SQLite): для хранения структурированных данных, информации о пользователях, заявках и т.д.
    *   Векторная БД (ChromaDB): для хранения эмбеддингов для семантического поиска и RAG.
    *   Графовая БД (Neo4j): для хранения и анализа связей между сущностями.
*   **Обработчик файлов (Python):** Контейнер или набор сервисов, отвечающих за прием, парсинг, извлечение текста и метаданных из различных форматов файлов.
*   **Модуль аналитики и ИИ (Python):** Набор сервисов, использующих библиотеки машинного обучения и НЛП для анализа данных, построения моделей, генерации отчетов.
*   **Модуль интеграций (Python):** Отвечает за взаимодействие с внешними API и сервисами (Google, OpenAI, GigaChat, и др.).

### Уровень 3: Компоненты (Components)

На этом уровне можно детализировать бэкенд-приложение:

**Бэкенд-приложение (Python, FastAPI):**

```
+-----------------------------------------------------------------------------------+
|                               Бэкенд-приложение (FastAPI)                           |
|-----------------------------------------------------------------------------------|
| +-----------------+ +-----------------+ +-----------------+ +-------------------+ |
| |  API-контроллеры| | Сервис аутентиф.| | Сервис обработки| | Сервис управления | |
| | (Endpoints)     | | (Auth Service)  | | данных (Data   | | графами (Graph   | |
| |                 | |                 | | Processing Svc) | | Management Svc)   | |
| +-----------------+ +-----------------+ +-----------------+ +-------------------+ |
|         |                   |                    |                   |            |
| +---------------------------------------------------------------------------------+ |
| |                            Слой бизнес-логики                                   | |
| | (Core Logic: RAG, NLP, ML models, Document Processing, Integrations)            | |
| +---------------------------------------------------------------------------------+ |
|         |                   |                    |                   |            |
| +-----------------+ +-----------------+ +-----------------+ +-------------------+ |
| |  Адаптеры БД    | |   Клиенты внеш. | |  Менеджер задач | |   Конфигурация    | |
| | (DB Adapters)   | |   сервисов (API | | (Task Manager)  | |  (Config Loader)  | |
| |                 | |   Clients)      | |                 | |                   | |
| +-----------------+ +-----------------+ +-----------------+ +-------------------+ |
+-----------------------------------------------------------------------------------+
```

*   **API-контроллеры:** Обрабатывают входящие HTTP-запросы от фронтенда или других клиентов.
*   **Сервис аутентификации:** Отвечает за проверку учетных данных пользователей и управление сессиями.
*   **Сервис обработки данных:** Оркестрирует задачи, связанные с загрузкой, очисткой, трансформацией и анализом данных.
*   **Сервис управления графами:** Отвечает за создание, обновление и запросы к графу знаний.
*   **Слой бизнес-логики:** Содержит основную логику приложения, включая RAG-пайплайны, модели НЛП и машинного обучения, обработку документов, взаимодействие с внешними сервисами.
*   **Адаптеры БД:** Абстракции для взаимодействия с различными базами данных.
*   **Клиенты внешних сервисов:** Модули для работы с API OpenAI, Google Cloud и т.д.
*   **Менеджер задач:** (Возможно) Управляет фоновыми и асинхронными задачами.
*   **Конфигурация:** Загружает и предоставляет доступ к настройкам приложения.

### Уровень 4: Код (Code)

На этом уровне будут рассматриваться конкретные классы и модули в Python и JavaScript/TypeScript, реализующие компоненты, описанные выше. Например, в бэкенде это могут быть:

*   Модели SQLAlchemy для таблиц БД.
*   Классы Pydantic для валидации данных API.
*   Модули LlamaIndex для построения индексов и выполнения запросов.
*   Классы-сервисы, инкапсулирующие бизнес-логику.
*   Функции-обработчики FastAPI.

В фронтенде:

*   React-компоненты для различных частей интерфейса.
*   Сервисы для взаимодействия с API бэкенда.
*   Хуки и контексты для управления состоянием.

Это предварительное описание и структура. Для более точного анализа потребуется более глубокое изучение исходного кода и архитектурных документов проекта, если таковые имеются. 